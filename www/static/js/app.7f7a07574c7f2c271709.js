webpackJsonp([1],{"7zck":function(t,e){},BumS:function(t,e){},E52X:function(t,e){},EVCQ:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("Xrl+"),a("fLmE");var s=a("yviF"),n=a.n(s),i=a("7+uW"),o=a("EOUi"),r=a.n(o),c=a("NYxO");i.default.use(c.a);var l=new c.a.Store({modules:{splitter:{namespaced:!0,state:{open:!1},mutations:{toggle:function(t,e){t.open="boolean"==typeof e?e:!t.open}}},user:{namespaced:!0,state:{data:{},hasLogin:!1},mutations:{login:function(t,e){t.data=e,t.hasLogin=!0},logout:function(t){t.data={},t.hasLogin=!1}}}}}),u=a("Xxa5"),d=a.n(u),p=a("exGp"),m=a.n(p),v=(a("881v"),a("dih4"),{name:"Create",data:function(){return{email:"",password:"",sendFlg:!1}},methods:{pop:function(){this.$emit("pop")},signup:function(){var t=this;n.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(function(e){t.$emit("pop"),t.sendFlg=!0})}}}),f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-ons-page",[a("div",{staticClass:"toolbar"},[a("div",{staticClass:"toolbar__left"},[a("div",{staticClass:"toolbar-button",on:{click:t.BoardCreate}},[t._v("掲示板を作成する")])]),a("div",{staticClass:"toolbar__center"},[t._v("新規作成")]),a("div",{staticClass:"toolbar__right"},[a("div",{staticClass:"toolbar-button",on:{click:t.pop}},[t._v("戻る")])])]),a("v-ons-list",[a("v-ons-list-item",[a("v-ons-input",{attrs:{placeholder:"メールアドレス"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("v-ons-list-item",[a("v-ons-input",{attrs:{placeholder:"パスワード"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("v-ons-list-item",[a("v-ons-button",{on:{click:t.signup}},[t._v("登録")])],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(v,f,!1,function(t){a("E52X")},"data-v-e4de6b96",null).exports,g=a("W3Iv"),_=a.n(g),b=(a("hZls"),a("kBYy")),C=a.n(b),x={name:"Create",data:function(){return{database:n.a.database(),lists:[],title:"",description:""}},created:function(){this.boardRef=this.database.ref("board")},methods:{pull:function(){this.$emit("pop")},createBoard:function(){var t=this;this.boardRef.push({title:this.title,description:this.description}).then(function(){t.pull()})}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-ons-page",[a("div",{staticClass:"toolbar"},[a("div",{staticClass:"toolbar__left"}),a("div",{staticClass:"toolbar__center"},[t._v("掲示板作成")]),a("div",{staticClass:"toolbar__right",on:{click:t.pull}},[a("span",{staticClass:"toolbar-button"},[t._v("戻る")])])]),a("v-ons-list",[a("v-ons-list-item",[a("v-ons-input",{attrs:{placeholder:"タイトル"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),a("v-ons-list-item",[a("v-ons-input",{attrs:{placeholder:"説明文"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),a("v-ons-button",{attrs:{modifier:"large"},on:{click:t.createBoard}},[t._v("新規作成する")])],1)],1)},staticRenderFns:[]};var w=a("VU/8")(x,k,!1,function(t){a("BumS")},"data-v-f5f7032a",null).exports,$=(a("7zck"),{render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]});var S={name:"MenuBar",components:{VuetifyBase:a("VU/8")({name:"VuetifyBase",data:function(){return{}}},$,!1,function(t){a("EVCQ")},"data-v-62f22ec2",null).exports},methods:{logout:function(){this.$emit("logout")}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"text-xs-right"},[a("v-menu",{attrs:{"offset-y":"offset-y"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-ons-icon",t._g({attrs:{icon:"ion-navicon, material:md-menu",size:"20px"}},s))]}}])},[a("v-list",[a("v-list-tile",[a("v-list-tile-title",{on:{click:t.logout}},[t._v("ログアウト")])],1)],1)],1)],1)])},staticRenderFns:[]};var E=a("VU/8")(S,y,!1,function(t){a("uMvc")},"data-v-6c3f9846",null).exports,N={name:"Navigator",data:function(){return{currentPage:"",pages:["logout"],openSide:!1}},props:{hideBack:{type:Boolean,default:!1},centerMessage:{type:String,default:"ようこそ掲示板へ！"}},components:{MenuBar:E},computed:{loginFlg:function(){return this.$store.state.user.hasLogin}},methods:{pull:function(){this.$emit("pull")},logout:function(){this.$emit("logout")}}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"toolbar"},[a("div",{staticClass:"toolbar__left"},[t.hideBack?t._e():a("v-ons-button",{attrs:{modifier:"quiet"},on:{click:t.pull}},[t._v("戻る")])],1),a("div",{staticClass:"toolbar__center"},[t._v(t._s(t.centerMessage))]),a("div",{staticClass:"toolbar__right"},[a("MenuBar",{on:{logout:t.logout}})],1)])},staticRenderFns:[]};var Y=a("VU/8")(N,U,!1,function(t){a("dHkh")},"data-v-0160b20c",null).exports,B={name:"ChatIndex",data:function(){return{lists:[],comment:""}},mixins:[{methods:{getFormatDate:function(t,e){if(e||(e="YYYY-MM-DD hh:mm:ss.SSS"),(e=(e=(e=(e=(e=(e=e.replace(/YYYY/g,t.getFullYear())).replace(/MM/g,("0"+(t.getMonth()+1)).slice(-2))).replace(/DD/g,("0"+t.getDate()).slice(-2))).replace(/hh/g,("0"+t.getHours()).slice(-2))).replace(/mm/g,("0"+t.getMinutes()).slice(-2))).replace(/ss/g,("0"+t.getSeconds()).slice(-2))).match(/S/g))for(var a=("00"+t.getMilliseconds()).slice(-3),s=e.match(/S/g).length,n=0;n<s;n++)e=e.replace(/S/,a.substring(n,n+1));return e}}}],props:{boardId:{type:String,default:""}},components:{Navigation:Y},created:function(){var t=this;this.database=n.a.database(),this.chatRef=this.database.ref("chat"),this.database.ref("chat").orderByChild("createdAt").on("value",function(e){var a=[];_()(e.val()).forEach(function(e){var s=e[1];s.boardId===t.boardId&&a.push(s)}),t.lists=a})},computed:{userId:function(){return this.$store.state.user.data.uid},user:function(){return this.$store.state.user.data}},methods:{submitComment:function(){var t=this;console.log(this.getFormatDate(new Date,"YYYY/mm/dd hh:mm:ss")),n.a.firestore().collection("users").doc(this.user.uid).get().then(function(e){t.chatRef.push({name:e.data().name,userId:t.user.uid,boardId:t.boardId,comment:t.comment,createdAt:t.getFormatDate(new Date,"YYYY/mm/dd hh:mm:ss")}),t.comment=""})},pull:function(){this.$emit("pop")},logout:function(){var t=this;n.a.auth().signOut().then(function(){t.$store.commit("user/logout"),t.$emit("reset")})}}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-ons-page",[a("Navigation",{on:{logout:t.logout,pull:t.pull}}),a("h1",[t._v("chat index")]),a("div",{staticClass:"page-wrapper"},[a("div",{staticClass:"lists-wrapper"},[t.lists?a("v-ons-list",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll"}],staticClass:"list-wrapper scrollingContainer"},t._l(t.lists,function(e,s){return a("v-ons-list-item",{key:s},[a("div",{staticClass:"center"},[a("span",{staticClass:"list-item__subtitle"},[t._v(t._s(e.name))]),a("span",{staticClass:"list-item__title font-comment"},[t._v(t._s(e.comment))])])])}),1):a("p",[t._v("まだ何も投稿されていません")])],1),a("div",{staticClass:"comment-wrapper"},[a("div",{staticClass:"flex-wrapper"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"textarea",attrs:{placeholder:"コメントを書く…"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}}),a("v-ons-button",{staticClass:"custom-button",on:{click:t.submitComment}},[t._v("送信")])],1)])])],1)},staticRenderFns:[]};var F=a("VU/8")(B,I,!1,function(t){a("UgA3")},"data-v-bc18856c",null).exports,R={name:"Index",data:function(){return{lists:[],search:"",pageNum:10,currentPage:1,pageList:[]}},components:{Paginate:C.a,BoardCreate:w,ChatIndex:F,Navigation:Y},created:function(){var t=this;this.database=n.a.database(),this.boardRef=this.database.ref("board"),this.boardRef.on("value",function(e){for(var a={},s=1,n=function(n){var i={};_()(e.val()).slice(n,n+t.pageNum).forEach(function(t){i[t[0]]=t[1]}),a[s]=i,s++},i=0;i<_()(e.val()).length;i+=t.pageNum)n(i);t.pageList=a,t.lists=a[t.currentPage]})},methods:{functionName:function(t){this.lists=this.pageList[t]},pull:function(){this.$emit("pop")},BoardCreate:function(){this.$emit("push",w)},logout:function(){var t=this;n.a.auth().signOut().then(function(){t.$store.commit("user/logout"),t.$emit("reset")})},ChatIndex:function(t){this.$emit("push",{extends:F,onsNavigatorProps:{boardId:t}})}}},V={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-ons-page",[a("Navigation",{attrs:{hideBack:!0},on:{logout:t.logout,pull:t.pull}}),a("v-ons-search-input",{staticStyle:{"margin-bottom":"15px"},attrs:{placeholder:"掲示板を検索する"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("Paginate",{attrs:{"page-count":20,"prev-text":"Prev","next-text":"Next"}}),a("v-ons-list",t._l(t.lists,function(e,s,n){return a("v-ons-list-item",{key:n,on:{click:function(e){return t.ChatIndex(s)}}},[a("div",{staticClass:"center"},[a("span",{staticClass:"list-item__title"},[t._v(t._s(e.title))]),a("span",{staticClass:"list-item__subtitle"},[t._v(t._s(e.description))])])])}),1),a("v-ons-button",{on:{click:t.BoardCreate}},[t._v("掲示板新規作成")])],1)},staticRenderFns:[]};var L=a("VU/8")(R,V,!1,function(t){a("mLhw")},null,null).exports,M={name:"Create",components:{Navigation:Y},data:function(){return{ages:[],age:1,name:"",description:""}},created:function(){for(var t=0;t<120;t++)this.ages.push({value:t})},methods:{createProfile:function(){var t=this,e=n.a.firestore(),a=this.$store.state.user.data.uid;e.collection("users").doc(a).set({name:this.name,age:this.age,description:this.description}).then(function(){console.log("Document successfully written!"),t.$emit("pop")}).catch(function(t){console.error("Error writing document: ",t)})}}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-ons-page",[a("Navigation",{attrs:{centerMessage:"ユーザー登録"}}),a("v-ons-list",[a("v-ons-list-item",[a("label",{staticClass:"left label-left"},[t._v("名前")]),a("v-ons-input",{staticClass:"left-margin",attrs:{placeholder:"名前"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("v-ons-list-item",[a("label",{staticClass:"left label-left"},[t._v("年齢")]),a("v-ons-select",{staticClass:"left-margin",attrs:{placeholder:"年齢"},model:{value:t.age,callback:function(e){t.age=e},expression:"age"}},t._l(t.ages,function(e){return a("option",{domProps:{value:e.value}},[t._v(t._s(e.value))])}),0)],1),a("v-ons-list-item",[a("label",{staticClass:"left label-left"},[t._v("自己紹介")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"left-margin textarea",attrs:{placeholder:"自己紹介"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),a("v-ons-list-item",[a("v-ons-button",{attrs:{modifier:"large"},on:{click:t.createProfile}},[t._v("登録する")])],1)],1)],1)},staticRenderFns:[]};var D=a("VU/8")(M,P,!1,function(t){a("uwql")},"data-v-761a0abb",null).exports,A={name:"Home",data:function(){return{finishLoad:!1,email:"",password:"",error_message:"",user:{},resultValue:!1}},created:function(){var t=this;this.error_message="",n.a.auth().onAuthStateChanged(function(e){t.user=e,t.finishLoad=!0,t.$store.commit("user/login",t.user),t.user&&t.getCurrentUser(e).then(function(e){e?t.$emit("push",L):t.$emit("push",D)})})},computed:{hasLogin:function(){return this.$store.state.user.hasLogin}},methods:{getCurrentUser:function(t){var e=this;return m()(d.a.mark(function a(){var s,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.a.firestore(),i=s.collection("users").doc(t.uid),e.next=4,i.get();case 4:if(!e.sent){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},a,e)}))()},createUser:function(){this.error_message="",this.$emit("push",h)},login:function(){var t=this;n.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(e){t.error_message=""}).catch(function(e){"auth/invalid-email"===e.code&&(t.error_message="メールアドレスが存在しません。")})}}},H={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-ons-page",[a("v-ons-card",[a("div",{staticClass:"title"},[t._v("ようこそなりきり掲示板へ！")]),a("v-ons-list",[a("v-ons-list-item",[a("p",[t._v("なりきり界隈が気兼ねなく利用できる掲示板があったらいいなと思い作成しました！もう一人の自分の生活をここから始めましょう！")])])],1),a("div",{staticClass:"content"},[a("p",{staticStyle:{color:"red"}},[t._v(t._s(t.error_message))]),a("v-ons-list",[a("v-ons-list-item",[a("v-ons-input",{attrs:{placeholder:"メールアドレス"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("v-ons-list-item",[a("v-ons-input",{attrs:{type:"password",placeholder:"パスワード"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("v-ons-list-item",[a("v-ons-button",{attrs:{modifier:"large"},on:{click:t.login}},[t._v("ログインする")])],1),a("v-ons-list-item",[a("button",{staticClass:"button button--outline",staticStyle:{"margin-bottom":"5px"},on:{click:t.createUser}},[t._v("新規登録の方はこちら")])])],1)],1)],1)],1)},staticRenderFns:[]};var z=a("VU/8")(A,H,!1,function(t){a("UGv2")},"data-v-3b467fc8",null).exports,O={data:function(){return{pageStack:[z]}},components:{Navigation:Y},methods:{reset:function(){this.pageStack=[],this.pageStack.push(z)}}},W={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-ons-navigator",{attrs:{swipeable:"swipeable","page-stack":t.pageStack},on:{push:function(e){return t.pageStack.push(e)},pop:function(e){return t.pageStack.pop()},reset:t.reset}})},staticRenderFns:[]};var X=a("VU/8")(O,W,!1,function(t){a("jZDR")},null,null).exports,Z=a("3EgV"),j=a.n(Z),q=a("bNL2"),G=a.n(q);i.default.config.productionTip=!1,i.default.use(G.a),i.default.use(r.a),i.default.use(C.a),i.default.use(j.a),document.body.setAttribute("data-app",!0);n.a.initializeApp({apiKey:"AIzaSyCkcPMPpVZxF65y_WpYu798e8oIV5YZvyI",authDomain:"massive-rock-234116.firebaseapp.com",databaseURL:"https://massive-rock-234116.firebaseio.com",projectId:"massive-rock-234116",storageBucket:"massive-rock-234116.appspot.com",messagingSenderId:"1039990050371"}),new i.default({el:"#app",store:l,template:"<App/>",components:{App:X}})},UGv2:function(t,e){},UgA3:function(t,e){},"Xrl+":function(t,e){},dHkh:function(t,e){},fLmE:function(t,e){},jZDR:function(t,e){},mLhw:function(t,e){},uMvc:function(t,e){},uwql:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7f7a07574c7f2c271709.js.map